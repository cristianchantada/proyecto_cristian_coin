{% extends "basic.html" %}

{% block pageContent %}
<section>
    <form action="/purchase" method="post">
        {{ operation_form.csrf_token }}

        <div class="grid">
            <div>{{ operation_form.moneda_from.label }}</div>
            <div>{{ operation_form.moneda_from }}</div>
            <div>{{ operation_form.moneda_to.label }}</div>
            <div>{{ operation_form.moneda_to }}</div>
        </div>
        <div class="grid">
            {{ operation_form.quantity_from.label }}
            {{ operation_form.quantity_from }}

            {{ operation_form.quantity_to.label }}
            {% if quantity_to %}
                {{ quantity_to }} {{ operation_form.moneda_to.data | lower }}'s
            {% endif %}
            {{ operation_form.quantity_to(value=quantity_to, type="hidden") }}
        </div>
        <div class="grid">
            <button type="submit" name="enviar" value="calculate"><span class="material-symbols-outlined">calculate</span></button>
        </div>
        <div class="grid">
            <table>
                <tr>
                    <td>
                        {{ operation_form.unitary_prize.label }}
                    </td>
                    <td>
                        {% if unitary_prize %}
                            {{ unitary_prize }} {{ operation_form.moneda_from.data | lower }}'s
                            {{ operation_form.unitary_prize(value=unitary_prize, type="hidden") }}
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <td>
                        {{ operation_form.date.label }}
                    </td>
                    <td>
                        {{ date }}
                        {{ operation_form.date(value=date, type="hidden") }}
                    </td>
                    <td>
                    <td>
                        {{ operation_form.time.label }}
                    </td>
                    <td>
                        {{ time }}
                        {{ operation_form.time(value=time, type="hidden") }}
                    </td>
                </tr>
            </table>
        </div>
        <div class="grid">
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <button style="color: red;" type="submit" name="enviar" value="validate" id="btn-valida"><span class="material-symbols-outlined">done_outline</span></button>
                {% else %}
                    <button type="submit" name="enviar" value="validate" id="btn-valida"><span class="material-symbols-outlined">done_outline</span></button>
                {% endif %}
            {% endwith %}
        </div>
    </form>
</section>
{% endblock %}